<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>EventPic</title>
  <script defer src="face-api.min.js"></script>
  <script defer src="script.js"></script>
  <style>
    body {
    margin: 0;
    padding: 0;
    width: 100vw;
    height: 100vh;
    display: flex;
    justify-content: center;
    align-items: center;
    flex-direction: column
  }
  canvas {
      position: absolute;
      top: 0;
      left: 0;
    }
  </style>
</head>
<body>
    <h2>ใครอยู่ในรูปภาพ</h2>
    <h1 id="text1">Image Processing</h1>
    <div id="output"></div>

    <script>

    async function updateResults() {
      if (!isFaceDetectionModelLoaded()) {
        return
      }

      const inputImgEl = $('#inputImg').get(0)
      const options = getFaceDetectorOptions()

      const detections = await faceapi.detectAllFaces(inputImgEl, options)
      const faceImages = await faceapi.extractFaces(inputImgEl, detections)

      displayExtractedFaces(faceImages)
    }

    function displayExtractedFaces(faceImages) {
      const canvas = $('#overlay').get(0)
      faceapi.matchDimensions(canvas, $('#inputImg').get(0))

      $('#facesContainer').empty()
      faceImages.forEach(canvas => $('#facesContainer').append(canvas))
    }

    async function run() {
      // load face detection model
      await changeFaceDetector(selectedFaceDetector)

      // start processing image
      updateResults()
    }

    $(document).ready(function() {
      renderNavBar('#navbar', 'face_extraction')
      initImageSelectionControls()
      initFaceDetectionControls()
      run()
    })
  </script>


</body>